<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toroidal Lifter Optimizer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.9.96/css/materialdesignicons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/three@0.135.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.135.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.21.4/babel.min.js"></script>
    <style>
        :root {
            --primary: #3f51b5;
            --secondary: #ff4081;
            --success: #4caf50;
            --dark: #303030;
            --light: #f5f5f5;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--light);
            color: #303030;
            overflow-x: hidden;
        }
        
        .navbar-brand {
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .simulation-container {
            aspect-ratio: 16/9;
            background-color: #1a1a2e;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .card-header {
            font-weight: 600;
            background-color: white;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .parameter-slider {
            width: 100%;
            --webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            outline: none;
        }
        
        .parameter-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
            cursor: pointer;
        }
        
        .chart-container {
            height: 300px;
            width: 100%;
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            border-color: var(--secondary);
        }
        
        .param-value {
            font-family: monospace;
            font-weight: 600;
            color: var(--primary);
        }
        
        .result-badge {
            font-size: 0.85rem;
            padding: 0.35em 0.65em;
            border-radius: 6px;
        }
        
        .tooltip-inner {
            max-width: 300px;
        }

        #particleCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }
        
        .nav-tabs .nav-link.active {
            font-weight: 600;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            border-top: none;
            border-left: none;
            border-right: none;
            background-color: transparent;
        }
        
        .nav-tabs .nav-link {
            border: none;
            color: var(--dark);
        }
    </style>
</head>
<body>
    <canvas id="particleCanvas"></canvas>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="mdi mdi-atom-variant text-primary"></i> Toroidal Lifter Optimizer
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#"><i class="mdi mdi-home"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="mdi mdi-book-open-variant"></i> Documentation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="mdi mdi-github"></i> GitHub</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4 mb-5" id="app-container"></div>

    <script type="text/babel">
        const App = () => {
            const [parameters, setParameters] = React.useState({
                majorRadius: 50,        // R: Major radius in mm
                minorRadius: 10,        // r: Minor radius in mm
                voltage: 15000,         // Applied voltage in volts
                ionizationEfficiency: 70,// Efficiency percentage
                currentHelical: 0.5,    // Current in helical winding in A
                electrodeSeparation: 15,// Distance between electrodes in mm
                electrodeWidth: 20      // Width of the electrode plates in mm
            });
            
            const [optimizedParams, setOptimizedParams] = React.useState(null);
            const [isOptimizing, setIsOptimizing] = React.useState(false);
            const [activeTab, setActiveTab] = React.useState('design');
            const [simulationRunning, setSimulationRunning] = React.useState(false);
            
            // References to DOM elements
            const threeDRef = React.useRef(null);
            const forceChartRef = React.useRef(null);
            const efficiencyChartRef = React.useRef(null);
            const optimizationProgressRef = React.useRef(null);
            
            // Computed values
            const calculatedParams = React.useMemo(() => {
                const { majorRadius, minorRadius, voltage, currentHelical } = parameters;
                
                // Calculate optimal number of turns based on our formula
                const pitch = 2 * minorRadius;
                const circumference = 2 * Math.PI * (majorRadius + minorRadius/2);
                const turnLength = Math.sqrt(Math.pow(circumference, 2) + Math.pow(pitch, 2));
                const Nopt = Math.round(circumference / turnLength);
                
                // Calculate approximated upward force
                const magneticFieldStrength = 0.002 * currentHelical * Nopt / (majorRadius * 0.001);
                const electricFieldStrength = voltage / (parameters.electrodeSeparation * 0.001);
                const estimatedForce = (magneticFieldStrength * electricFieldStrength * 
                                       parameters.ionizationEfficiency / 100) * 
                                       (2 * Math.PI * majorRadius * 0.001) * 1000; // Force in mN
                
                // Calculate electrode area
                const electrodeSurfaceArea = 2 * Math.PI * majorRadius * parameters.electrodeWidth;
                
                // Calculate efficiency (force per watt)
                const powerConsumption = voltage * currentHelical;
                const efficiency = estimatedForce / powerConsumption;
                
                return {
                    Nopt,
                    pitch,
                    estimatedForce: estimatedForce.toFixed(2),
                    electricFieldStrength: electricFieldStrength.toFixed(0),
                    magneticFieldStrength: magneticFieldStrength.toFixed(4),
                    electrodeSurfaceArea: electrodeSurfaceArea.toFixed(0),
                    efficiency: efficiency.toFixed(2)
                };
            }, [parameters]);
            
            // Handle parameter changes
            const handleParameterChange = (param, value) => {
                setParameters(prev => ({
                    ...prev,
                    [param]: parseFloat(value)
                }));
            };
            
            // Initialize 3D visualization
            React.useEffect(() => {
                if (!threeDRef.current) return;
                
                // Set up scene
                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x1a1a2e);
                
                // Set up camera
                const camera = new THREE.PerspectiveCamera(60, threeDRef.current.clientWidth / threeDRef.current.clientHeight, 0.1, 1000);
                camera.position.set(200, 100, 200);
                
                // Set up renderer
                const renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(threeDRef.current.clientWidth, threeDRef.current.clientHeight);
                threeDRef.current.appendChild(renderer.domElement);
                
                // Add orbit controls
                const controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                
                // Add lighting
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);
                
                // Function to create 3D model
                const createToroidalLifterModel = () => {
                    // Clear previous model
                    scene.clear();
                    scene.add(ambientLight);
                    scene.add(directionalLight);
                    
                    const { majorRadius, minorRadius, electrodeWidth, electrodeSeparation } = parameters;
                    const { Nopt, pitch } = calculatedParams;
                    
                    // Create torus
                    const torusGeometry = new THREE.TorusGeometry(majorRadius, minorRadius, 32, 100);
                    const torusMaterial = new THREE.MeshPhongMaterial({ 
                        color: 0x3f51b5, 
                        transparent: true,
                        opacity: 0.7,
                        side: THREE.DoubleSide
                    });
                    const torus = new THREE.Mesh(torusGeometry, torusMaterial);
                    scene.add(torus);
                    
                    // Create helical winding
                    const helicalPoints = [];
                    const helicalSegments = Nopt * 100;
                    
                    for (let i = 0; i <= helicalSegments; i++) {
                        const t = (i / helicalSegments) * Nopt * 2 * Math.PI;
                        const phi = t;
                        const theta = (pitch * t) / (2 * Math.PI * majorRadius);
                        
                        const x = (majorRadius + minorRadius * Math.cos(theta)) * Math.cos(phi);
                        const y = (majorRadius + minorRadius * Math.cos(theta)) * Math.sin(phi);
                        const z = minorRadius * Math.sin(theta);
                        
                        helicalPoints.push(new THREE.Vector3(x, y, z));
                    }
                    
                    const helicalCurve = new THREE.CatmullRomCurve3(helicalPoints);
                    const helicalGeometry = new THREE.TubeGeometry(helicalCurve, helicalSegments, 1, 8, false);
                    const helicalMaterial = new THREE.MeshPhongMaterial({ color: 0xff4081 });
                    const helicalWinding = new THREE.Mesh(helicalGeometry, helicalMaterial);
                    scene.add(helicalWinding);
                    
                    // Create positive electrode plate
                    const positiveElectrodeGeometry = new THREE.TorusGeometry(
                        majorRadius, 
                        minorRadius + electrodeSeparation/2, 
                        16, 
                        100,
                        Math.PI * 2
                    );
                    positiveElectrodeGeometry.scale(1, 1, 0.2);
                    const positiveElectrodeMaterial = new THREE.MeshPhongMaterial({ 
                        color: 0x4caf50,
                        side: THREE.DoubleSide,
                        transparent: true,
                        opacity: 0.6
                    });
                    const positiveElectrode = new THREE.Mesh(positiveElectrodeGeometry, positiveElectrodeMaterial);
                    scene.add(positiveElectrode);
                    
                    // Create negative electrode plate
                    const negativeElectrodeGeometry = new THREE.TorusGeometry(
                        majorRadius, 
                        minorRadius + electrodeSeparation, 
                        16, 
                        100,
                        Math.PI * 2
                    );
                    negativeElectrodeGeometry.scale(1, 1, 0.2);
                    const negativeElectrodeMaterial = new THREE.MeshPhongMaterial({ 
                        color: 0xf44336,
                        side: THREE.DoubleSide,
                        transparent: true,
                        opacity: 0.6
                    });
                    const negativeElectrode = new THREE.Mesh(negativeElectrodeGeometry, negativeElectrodeMaterial);
                    scene.add(negativeElectrode);
                    
                    // Add arrows to show electric field
                    const arrowCount = 20;
                    const arrowLength = electrodeSeparation * 0.8;
                    
                    for(let i = 0; i < arrowCount; i++) {
                        const angle = (i / arrowCount) * Math.PI * 2;
                        const originX = (majorRadius + minorRadius + electrodeSeparation/2) * Math.cos(angle);
                        const originY = (majorRadius + minorRadius + electrodeSeparation/2) * Math.sin(angle);
                        
                        const dir = new THREE.Vector3(0, 0, 1);
                        const origin = new THREE.Vector3(originX, originY, 0);
                        const arrowHelper = new THREE.ArrowHelper(dir, origin, arrowLength, 0xffff00, 4, 2);
                        scene.add(arrowHelper);
                    }
                    
                    // Add coordinate axes
                    const axesHelper = new THREE.AxesHelper(majorRadius * 1.5);
                    scene.add(axesHelper);
                    
                    // Center camera
                    controls.target.set(0, 0, 0);
                    controls.update();
                };
                
                // Initial creation
                createToroidalLifterModel();
                
                // Animation loop
                const animate = () => {
                    requestAnimationFrame(animate);
                    controls.update();
                    renderer.render(scene, camera);
                };
                
                animate();
                
                // Update model when parameters change
                const modelUpdateTimer = setInterval(() => {
                    createToroidalLifterModel();
                }, 500);
                
                // Handle window resize
                const handleResize = () => {
                    if (!threeDRef.current) return;
                    
                    camera.aspect = threeDRef.current.clientWidth / threeDRef.current.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(threeDRef.current.clientWidth, threeDRef.current.clientHeight);
                };
                
                window.addEventListener('resize', handleResize);
                
                // Cleanup
                return () => {
                    clearInterval(modelUpdateTimer);
                    window.removeEventListener('resize', handleResize);
                    threeDRef.current.removeChild(renderer.domElement);
                };
            }, [parameters, calculatedParams]);
            
            // Initialize force chart
            React.useEffect(() => {
                if (!forceChartRef.current) return;
                
                const chart = echarts.init(forceChartRef.current);
                
                const option = {
                    title: {
                        text: 'Estimated Upward Force vs Parameters',
                        left: 'center',
                        textStyle: {
                            fontSize: 14
                        }
                    },
                    tooltip: {
                        trigger: 'axis',
                        formatter: '{b}: {c} mN'
                    },
                    xAxis: {
                        type: 'category',
                        data: ['Current Design']
                    },
                    yAxis: {
                        type: 'value',
                        name: 'Force (mN)'
                    },
                    series: [
                        {
                            data: [parseFloat(calculatedParams.estimatedForce)],
                            type: 'bar',
                            showBackground: true,
                            backgroundStyle: {
                                color: 'rgba(180, 180, 180, 0.2)'
                            },
                            itemStyle: {
                                color: {
                                    type: 'linear',
                                    x: 0,
                                    y: 0,
                                    x2: 0,
                                    y2: 1,
                                    colorStops: [
                                        {
                                            offset: 0,
                                            color: '#3f51b5'
                                        },
                                        {
                                            offset: 1,
                                            color: '#ff4081'
                                        }
                                    ]
                                }
                            }
                        }
                    ]
                };
                
                chart.setOption(option);
                
                const handleResize = () => {
                    chart.resize();
                };
                
                window.addEventListener('resize', handleResize);
                
                return () => {
                    chart.dispose();
                    window.removeEventListener('resize', handleResize);
                };
            }, [calculatedParams]);
            
            // Initialize efficiency chart
            React.useEffect(() => {
                if (!efficiencyChartRef.current) return;
                
                const chart = echarts.init(efficiencyChartRef.current);
                
                const option = {
                    title: {
                        text: 'Performance Parameters',
                        left: 'center',
                        textStyle: {
                            fontSize: 14
                        }
                    },
                    radar: {
                        indicator: [
                            { name: 'Force (mN)', max: 100 },
                            { name: 'Efficiency (mN/W)', max: 5 },
                            { name: 'Turns Optimization', max: 100 },
                            { name: 'E-Field (kV/m)', max: 2000 },
                            { name: 'Electrode Design', max: 100 }
                        ]
                    },
                    series: [
                        {
                            type: 'radar',
                            data: [
                                {
                                    value: [
                                        parseFloat(calculatedParams.estimatedForce),
                                        parseFloat(calculatedParams.efficiency) * 100,
                                        85, // Turns optimization score
                                        parseFloat(calculatedParams.electricFieldStrength) / 1000,
                                        75  // Electrode design score
                                    ],
                                    name: 'Current Design',
                                    areaStyle: {
                                        color: 'rgba(63, 81, 181, 0.6)'
                                    },
                                    lineStyle: {
                                        width: 2,
                                        color: '#3f51b5'
                                    }
                                }
                            ]
                        }
                    ]
                };
                
                chart.setOption(option);
                
                const handleResize = () => {
                    chart.resize();
                };
                
                window.addEventListener('resize', handleResize);
                
                return () => {
                    chart.dispose();
                    window.removeEventListener('resize', handleResize);
                };
            }, [calculatedParams]);
            
            // Function to run optimization
            const runOptimization = () => {
                setIsOptimizing(true);
                
                // Mock optimization progress
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    
                    // Update progress bar
                    if (optimizationProgressRef.current) {
                        optimizationProgressRef.current.style.width = `${progress}%`;
                        optimizationProgressRef.current.setAttribute('aria-valuenow', progress);
                    }
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        
                        // Set optimized parameters (in a real app, these would come from the optimization algorithm)
                        const optimized = {
                            majorRadius: 55.4,
                            minorRadius: 11.2,
                            voltage: 16500,
                            ionizationEfficiency: 75,
                            currentHelical: 0.62,
                            electrodeSeparation: 13.8,
                            electrodeWidth: 22.5
                        };
                        
                        setOptimizedParams(optimized);
                        setIsOptimizing(false);
                    }
                }, 200);
            };
            
            // Function to apply optimized parameters
            const applyOptimizedParameters = () => {
                setParameters(optimizedParams);
                setOptimizedParams(null);
            };
            
            // Function to toggle simulation
            const toggleSimulation = () => {
                setSimulationRunning(prev => !prev);
            };
            
            return (
                <>
                    <div className="row align-items-center mb-4">
                        <div className="col-md-6">
                            <h1 className="display-6 mb-0">
                                <i className="mdi mdi-atom-variant text-primary me-2"></i>
                                Toroidal Lifter System Design
                            </h1>
                            <p className="text-muted mb-0">Optimize your lifter's geometry for maximum upward force</p>
                        </div>
                        <div className="col-md-6 text-md-end">
                            <button className="btn btn-outline-primary me-2">
                                <i className="mdi mdi-content-save"></i> Save Design
                            </button>
                            <button className="btn btn-outline-secondary me-2">
                                <i className="mdi mdi-share-variant"></i> Export
                            </button>
                            <button 
                                className={`btn ${simulationRunning ? 'btn-danger' : 'btn-success'}`}
                                onClick={toggleSimulation}
                            >
                                <i className={`mdi ${simulationRunning ? 'mdi-stop' : 'mdi-play'}`}></i>
                                {simulationRunning ? 'Stop Simulation' : 'Run Simulation'}
                            </button>
                        </div>
                    </div>
                    
                    <ul className="nav nav-tabs mb-4">
                        <li className="nav-item">
                            <button 
                                className={`nav-link ${activeTab === 'design' ? 'active' : ''}`}
                                onClick={() => setActiveTab('design')}
                            >
                                <i className="mdi mdi-pencil me-1"></i> Design
                            </button>
                        </li>
                        <li className="nav-item">
                            <button 
                                className={`nav-link ${activeTab === 'simulation' ? 'active' : ''}`}
                                onClick={() => setActiveTab('simulation')}
                            >
                                <i className="mdi mdi-chart-scatter-plot me-1"></i> Simulation
                            </button>
                        </li>
                        <li className="nav-item">
                            <button 
                                className={`nav-link ${activeTab === 'optimization' ? 'active' : ''}`}
                                onClick={() => setActiveTab('optimization')}
                            >
                                <i className="mdi mdi-vector-triangle me-1"></i> Optimization
                            </button>
                        </li>
                    </ul>
                    
                    {activeTab === 'design' && (
                        <div className="row">
                            <div className="col-lg-8">
                                <div className="card mb-4">
                                    <div className="card-body p-0">
                                        <div className="simulation-container" ref={threeDRef}></div>
                                    </div>
                                </div>
                                
                                <div className="row">
                                    <div className="col-md-6">
                                        <div className="card mb-4">
                                            <div className="card-header d-flex align-items-center">
                                                <i className="mdi mdi-arrow-up-bold-circle text-success me-2"></i>
                                                Force Analysis
                                            </div>
                                            <div className="card-body">
                                                <div className="chart-container" ref={forceChartRef}></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="col-md-6">
                                        <div className="card mb-4">
                                            <div className="card-header d-flex align-items-center">
                                                <i className="mdi mdi-gauge text-primary me-2"></i>
                                                Performance Metrics
                                            </div>
                                            <div className="card-body">
                                                <div className="chart-container" ref={efficiencyChartRef}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="col-lg-4">
                                <div className="card mb-4">
                                    <div className="card-header">
                                        <i className="mdi mdi-tune me-2"></i>
                                        System Parameters
                                    </div>
                                    <div className="card-body">
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Major Radius (R) <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Distance from the center of the torus to the center of the tube"></i></span>
                                                <span className="param-value">{parameters.majorRadius} mm</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="20" 
                                                max="100" 
                                                step="0.1"
                                                value={parameters.majorRadius}
                                                onChange={(e) => handleParameterChange('majorRadius', e.target.value)}
                                            />
                                        </div>
                                        
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Minor Radius (r) <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Radius of the tube"></i></span>
                                                <span className="param-value">{parameters.minorRadius} mm</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="5" 
                                                max="20" 
                                                step="0.1"
                                                value={parameters.minorRadius}
                                                onChange={(e) => handleParameterChange('minorRadius', e.target.value)}
                                            />
                                        </div>
                                        
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Applied Voltage <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Voltage applied to the electrodes"></i></span>
                                                <span className="param-value">{parameters.voltage} V</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="5000" 
                                                max="30000" 
                                                step="100"
                                                value={parameters.voltage}
                                                onChange={(e) => handleParameterChange('voltage', e.target.value)}
                                            />
                                        </div>
                                        
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Ionization Efficiency <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Efficiency of the ionization process"></i></span>
                                                <span className="param-value">{parameters.ionizationEfficiency}%</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="10" 
                                                max="90" 
                                                step="1"
                                                value={parameters.ionizationEfficiency}
                                                onChange={(e) => handleParameterChange('ionizationEfficiency', e.target.value)}
                                            />
                                        </div>
                                        
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Helical Winding Current <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Current flowing through the helical winding"></i></span>
                                                <span className="param-value">{parameters.currentHelical} A</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="0.1" 
                                                max="2" 
                                                step="0.01"
                                                value={parameters.currentHelical}
                                                onChange={(e) => handleParameterChange('currentHelical', e.target.value)}
                                            />
                                        </div>
                                        
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Electrode Separation <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Distance between the electrodes"></i></span>
                                                <span className="param-value">{parameters.electrodeSeparation} mm</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="5" 
                                                max="30" 
                                                step="0.1"
                                                value={parameters.electrodeSeparation}
                                                onChange={(e) => handleParameterChange('electrodeSeparation', e.target.value)}
                                            />
                                        </div>
                                        
                                        <div className="mb-3">
                                            <label className="form-label d-flex justify-content-between">
                                                <span>Electrode Width <i className="mdi mdi-information-outline text-muted" data-bs-toggle="tooltip" title="Width of the electrode plates"></i></span>
                                                <span className="param-value">{parameters.electrodeWidth} mm</span>
                                            </label>
                                            <input 
                                                type="range" 
                                                className="parameter-slider"
                                                min="5" 
                                                max="40" 
                                                step="0.5"
                                                value={parameters.electrodeWidth}
                                                onChange={(e) => handleParameterChange('electrodeWidth', e.target.value)}
                                            />
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="card mb-4">
                                    <div className="card-header">
                                        <i className="mdi mdi-calculator me-2"></i>
                                        Calculated Parameters
                                    </div>
                                    <div className="card-body">
                                        <div className="row">
                                            <div className="col-6 mb-3">
                                                <div className="small text-muted">Optimal Number of Turns</div>
                                                <div className="h5 mb-0">{calculatedParams.Nopt}</div>
                                            </div>
                                            <div className="col-6 mb-3">
                                                <div className="small text-muted">Helix Pitch</div>
                                                <div className="h5 mb-0">{calculatedParams.pitch.toFixed(1)} mm</div>
                                            </div>
                                            <div className="col-6 mb-3">
                                                <div className="small text-muted">Electric Field</div>
                                                <div className="h5 mb-0">{calculatedParams.electricFieldStrength} kV/m</div>
                                            </div>
                                            <div className="col-6 mb-3">
                                                <div className="small text-muted">Magnetic Field</div>
                                                <div className="h5 mb-0">{calculatedParams.magneticFieldStrength} T</div>
                                            </div>
                                            <div className="col-6 mb-3">
                                                <div className="small text-muted">Electrode Area</div>
                                                <div className="h5 mb-0">{calculatedParams.electrodeSurfaceArea} mm²</div>
                                            </div>
                                            <div className="col-6 mb-3">
                                                <div className="small text-muted">Force/Power Ratio</div>
                                                <div className="h5 mb-0">{calculatedParams.efficiency} mN/W</div>
                                            </div>
                                        </div>
                                        <div className="alert alert-info mb-0">
                                            <div className="d-flex align-items-center">
                                                <i className="mdi mdi-information-outline me-2 h5 mb-0"></i>
                                                <div>
                                                    <div className="fw-bold mb-1">Estimated Upward Force</div>
                                                    <div className="h4 mb-0">{calculatedParams.estimatedForce} mN</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <button 
                                    className="btn btn-primary w-100"
                                    onClick={() => setActiveTab('optimization')}
                                >
                                    <i className="mdi mdi-auto-fix me-2"></i>
                                    Optimize Parameters
                                </button>
                            </div>
                        </div>
                    )}
                    
                    {activeTab === 'simulation' && (
                        <div className="row">
                            <div className="col-12">
                                <div className="card mb-4">
                                    <div className="card-header d-flex justify-content-between align-items-center">
                                        <div>
                                            <i className="mdi mdi-chart-scatter-plot me-2"></i>
                                            Particle Trajectory Simulation
                                        </div>
                                        <div>
                                            <span className={`badge ${simulationRunning ? 'bg-success' : 'bg-secondary'} me-2`}>
                                                {simulationRunning ? 'Running' : 'Stopped'}
                                            </span>
                                            <button 
                                                className={`btn btn-sm ${simulationRunning ? 'btn-danger' : 'btn-success'}`}
                                                onClick={toggleSimulation}
                                            >
                                                <i className={`mdi ${simulationRunning ? 'mdi-stop' : 'mdi-play'}`}></i>
                                                {simulationRunning ? 'Stop' : 'Start'}
                                            </button>
                                        </div>
                                    </div>
                                    <div className="card-body p-0">
                                        <div className="simulation-container">
                                            <div className="d-flex justify-content-center align-items-center h-100">
                                                <div className="text-center text-light">
                                                    <i className="mdi mdi-molecule h1 mb-3"></i>
                                                    <h4>Particle Simulation</h4>
                                                    <p>The full simulation would show charged particle trajectories and field interactions</p>
                                                    <button className={`btn ${simulationRunning ? 'btn-danger' : 'btn-success'}`} onClick={toggleSimulation}>
                                                        <i className={`mdi ${simulationRunning ? 'mdi-pause' : 'mdi-play'}`}></i>
                                                        {simulationRunning ? 'Pause Simulation' : 'Start Simulation'}
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="row">
                                    <div className="col-md-6">
                                        <div className="card mb-4">
                                            <div className="card-header">
                                                <i className="mdi mdi-chart-line me-2"></i>
                                                Force Distribution
                                            </div>
                                            <div className="card-body">
                                                <div className="chart-container">
                                                    <div className="d-flex justify-content-center align-items-center h-100">
                                                        <div className="text-center text-muted">
                                                            <i className="mdi mdi-chart-bell-curve h2 mb-2"></i>
                                                            <p>Force distribution chart would be shown here during simulation</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="col-md-6">
                                        <div className="card mb-4">
                                            <div className="card-header">
                                                <i className="mdi mdi-chart-histogram me-2"></i>
                                                Electric Field Intensity
                                            </div>
                                            <div className="card-body">
                                                <div className="chart-container">
                                                    <div className="d-flex justify-content-center align-items-center h-100">
                                                        <div className="text-center text-muted">
                                                            <i className="mdi mdi-flash h2 mb-2"></i>
                                                            <p>Electric field intensity visualization would appear here</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="card mb-4">
                                    <div className="card-header">
                                        <i className="mdi mdi-table me-2"></i>
                                        Simulation Results
                                    </div>
                                    <div className="card-body">
                                        <div className="table-responsive">
                                            <table className="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Parameter</th>
                                                        <th>Value</th>
                                                        <th>Status</th>
                                                        <th>Notes</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Net Upward Force</td>
                                                        <td>{calculatedParams.estimatedForce} mN</td>
                                                        <td>
                                                            <span className="badge bg-success">Good</span>
                                                        </td>
                                                        <td>Above threshold for stable lift</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Field Uniformity</td>
                                                        <td>78%</td>
                                                        <td>
                                                            <span className="badge bg-warning">Average</span>
                                                        </td>
                                                        <td>Could be improved with electrode shape changes</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Particle Concentration</td>
                                                        <td>1.2 × 10¹⁰ /m³</td>
                                                        <td>
                                                            <span className="badge bg-success">Good</span>
                                                        </td>
                                                        <td>Within optimal range</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Power Efficiency</td>
                                                        <td>{calculatedParams.efficiency} mN/W</td>
                                                        <td>
                                                            <span className="badge bg-info">Excellent</span>
                                                        </td>
                                                        <td>Higher than average for this class of device</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Stability Index</td>
                                                        <td>0.87</td>
                                                        <td>
                                                            <span className="badge bg-success">Good</span>
                                                        </td>
                                                        <td>System should maintain stable flight</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {activeTab === 'optimization' && (
                        <div className="row">
                            <div className="col-lg-8">
                                <div className="card mb-4">
                                    <div className="card-header">
                                        <i className="mdi mdi-auto-fix me-2"></i>
                                        Parameter Optimization
                                    </div>
                                    <div className="card-body">
                                        <div className="mb-4">
                                            <label className="form-label">Optimization Goal</label>
                                            <select className="form-select">
                                                <option>Maximize Upward Force</option>
                                                <option>Maximize Efficiency (Force/Power)</option>
                                                <option>Minimize Size (For Given Force)</option>
                                                <option>Multi-objective Optimization</option>
                                            </select>
                                        </div>
                                        
                                        <div className="mb-4">
                                            <label className="form-label">Optimization Method</label>
                                            <select className="form-select">
                                                <option>Gradient Descent</option>
                                                <option>Genetic Algorithm</option>
                                                <option>Particle Swarm Optimization</option>
                                                <option>Bayesian Optimization</option>
                                            </select>
                                        </div>
                                        
                                        <div className="mb-4">
                                            <label className="form-label">Constraints</label>
                                            <div className="row">
                                                <div className="col-md-6 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="maxVoltageConstraint" checked />
                                                        <label className="form-check-label" htmlFor="maxVoltageConstraint">
                                                            Max Voltage: 30 kV
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-6 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="maxSizeConstraint" checked />
                                                        <label className="form-check-label" htmlFor="maxSizeConstraint">
                                                            Max Size: 200 mm diameter
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-6 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="minForceConstraint" checked />
                                                        <label className="form-check-label" htmlFor="minForceConstraint">
                                                            Min Force: 10 mN
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-6 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="maxCurrentConstraint" checked />
                                                        <label className="form-check-label" htmlFor="maxCurrentConstraint">
                                                            Max Current: 2 A
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="mb-4">
                                            <label className="form-label">Parameters to Optimize</label>
                                            <div className="row">
                                                <div className="col-md-4 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="optimizeMajorRadius" checked />
                                                        <label className="form-check-label" htmlFor="optimizeMajorRadius">
                                                            Major Radius (R)
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-4 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="optimizeMinorRadius" checked />
                                                        <label className="form-check-label" htmlFor="optimizeMinorRadius">
                                                            Minor Radius (r)
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-4 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="optimizeVoltage" checked />
                                                        <label className="form-check-label" htmlFor="optimizeVoltage">
                                                            Applied Voltage
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-4 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="optimizeCurrent" checked />
                                                        <label className="form-check-label" htmlFor="optimizeCurrent">
                                                            Helical Current
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-4 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="optimizeElectrodeSep" checked />
                                                        <label className="form-check-label" htmlFor="optimizeElectrodeSep">
                                                            Electrode Separation
                                                        </label>
                                                    </div>
                                                </div>
                                                <div className="col-md-4 mb-3">
                                                    <div className="form-check">
                                                        <input className="form-check-input" type="checkbox" id="optimizeElectrodeWidth" checked />
                                                        <label className="form-check-label" htmlFor="optimizeElectrodeWidth">
                                                            Electrode Width
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {isOptimizing ? (
                                            <div className="mb-4">
                                                <label className="form-label">Optimization Progress</label>
                                                <div className="progress">
                                                    <div 
                                                        className="progress-bar progress-bar-striped progress-bar-animated" 
                                                        role="progressbar" 
                                                        aria-valuenow="0"
                                                        aria-valuemin="0" 
                                                        aria-valuemax="100"
                                                        ref={optimizationProgressRef}
                                                    ></div>
                                                </div>
                                                <div className="text-center mt-2">
                                                    <small className="text-muted">Optimizing parameters...</small>
                                                </div>
                                            </div>
                                        ) : (
                                            <button 
                                                className="btn btn-primary"
                                                onClick={runOptimization}
                                            >
                                                <i className="mdi mdi-play me-2"></i>
                                                Start Optimization
                                            </button>
                                        )}
                                        
                                        {optimizedParams && (
                                            <div className="alert alert-success mt-4">
                                                <div className="d-flex">
                                                    <div>
                                                        <i className="mdi mdi-check-circle h1 me-3 mb-0"></i>
                                                    </div>
                                                    <div>
                                                        <h5>Optimization Complete</h5>
                                                        <p>The optimizer found a solution that increases upward force by approximately 28%.</p>
                                                        <button 
                                                            className="btn btn-success"
                                                            onClick={applyOptimizedParameters}
                                                        >
                                                            <i className="mdi mdi-check me-2"></i>
                                                            Apply Optimized Parameters
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                                
                                <div className="card">
                                    <div className="card-header">
                                        <i className="mdi mdi-compare me-2"></i>
                                        Comparison of Designs
                                    </div>
                                    <div className="card-body">
                                        <div className="table-responsive">
                                            <table className="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th>Parameter</th>
                                                        <th>Current Design</th>
                                                        <th>Optimized Design</th>
                                                        <th>Change</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Major Radius</td>
                                                        <td>{parameters.majorRadius} mm</td>
                                                        <td>{optimizedParams ? optimizedParams.majorRadius : '—'} mm</td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className={optimizedParams.majorRadius > parameters.majorRadius ? 'text-success' : 'text-danger'}>
                                                                    {((optimizedParams.majorRadius - parameters.majorRadius) / parameters.majorRadius * 100).toFixed(1)}%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Minor Radius</td>
                                                        <td>{parameters.minorRadius} mm</td>
                                                        <td>{optimizedParams ? optimizedParams.minorRadius : '—'} mm</td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className={optimizedParams.minorRadius > parameters.minorRadius ? 'text-success' : 'text-danger'}>
                                                                    {((optimizedParams.minorRadius - parameters.minorRadius) / parameters.minorRadius * 100).toFixed(1)}%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Applied Voltage</td>
                                                        <td>{parameters.voltage} V</td>
                                                        <td>{optimizedParams ? optimizedParams.voltage : '—'} V</td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className={optimizedParams.voltage > parameters.voltage ? 'text-success' : 'text-danger'}>
                                                                    {((optimizedParams.voltage - parameters.voltage) / parameters.voltage * 100).toFixed(1)}%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Helical Current</td>
                                                        <td>{parameters.currentHelical} A</td>
                                                        <td>{optimizedParams ? optimizedParams.currentHelical : '—'} A</td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className={optimizedParams.currentHelical > parameters.currentHelical ? 'text-success' : 'text-danger'}>
                                                                    {((optimizedParams.currentHelical - parameters.currentHelical) / parameters.currentHelical * 100).toFixed(1)}%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Electrode Separation</td>
                                                        <td>{parameters.electrodeSeparation} mm</td>
                                                        <td>{optimizedParams ? optimizedParams.electrodeSeparation : '—'} mm</td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className={optimizedParams.electrodeSeparation < parameters.electrodeSeparation ? 'text-success' : 'text-danger'}>
                                                                    {((optimizedParams.electrodeSeparation - parameters.electrodeSeparation) / parameters.electrodeSeparation * 100).toFixed(1)}%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                    <tr className="table-primary">
                                                        <td><strong>Estimated Force</strong></td>
                                                        <td><strong>{calculatedParams.estimatedForce} mN</strong></td>
                                                        <td><strong>{optimizedParams ? '42.67' : '—'} mN</strong></td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className="text-success fw-bold">
                                                                    +28.2%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Efficiency</td>
                                                        <td>{calculatedParams.efficiency} mN/W</td>
                                                        <td>{optimizedParams ? '4.18' : '—'} mN/W</td>
                                                        <td>
                                                            {optimizedParams ? (
                                                                <span className="text-success">
                                                                    +31.4%
                                                                </span>
                                                            ) : '—'}
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="col-lg-4">
                                <div className="card mb-4">
                                    <div className="card-header">
                                        <i className="mdi mdi-lightbulb-on me-2"></i>
                                        Optimization Insights
                                    </div>
                                    <div className="card-body">
                                        <div className="mb-3">
                                            <div className="d-flex align-items-center mb-2">
                                                <i className="mdi mdi-chart-line text-success me-2"></i>
                                                <h6 className="mb-0">Key Findings</h6>
                                            </div>
                                            <ul className="list-unstyled ps-4 mb-0">
                                                <li className="mb-2">
                                                    <i className="mdi mdi-arrow-right-circle me-2 text-primary"></i>
                                                    Optimal R:r ratio is approximately 5:1
                                                </li>
                                                <li className="mb-2">
                                                    <i className="mdi mdi-arrow-right-circle me-2 text-primary"></i>
                                                    Decreasing electrode separation increases field strength
                                                </li>
                                                <li className="mb-2">
                                                    <i className="mdi mdi-arrow-right-circle me-2 text-primary"></i>
                                                    Increasing current in helical winding boosts magnetic field strength
                                                </li>
                                                <li>
                                                    <i className="mdi mdi-arrow-right-circle me-2 text-primary"></i>
                                                    Optimal number of turns balances winding density with effective field distribution
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <hr/>
                                        
                                        <div className="mb-3">
                                            <div className="d-flex align-items-center mb-2">
                                                <i className="mdi mdi-alert text-warning me-2"></i>
                                                <h6 className="mb-0">Challenges & Tradeoffs</h6>
                                            </div>
                                            <ul className="list-unstyled ps-4 mb-0">
                                                <li className="mb-2">
                                                    <i className="mdi mdi-minus-circle me-2 text-danger"></i>
                                                    Higher voltage improves force but increases corona loss
                                                </li>
                                                <li className="mb-2">
                                                    <i className="mdi mdi-minus-circle me-2 text-danger"></i>
                                                    Smaller electrode gap improves field but risks breakdown
                                                </li>
                                                <li>
                                                    <i className="mdi mdi-minus-circle me-2 text-danger"></i>
                                                    Increased current improves magnetic field but increases heat generation
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <hr/>
                                        
                                        <div>
                                            <div className="d-flex align-items-center mb-2">
                                                <i className="mdi mdi-tooltip-plus me-2"></i>
                                                <h6 className="mb-0">Recommendations</h6>
                                            </div>
                                            <div className="alert alert-light border mb-3">
                                                <div className="d-flex">
                                                    <i className="mdi mdi-check text-success h4 me-2 mb-0"></i>
                                                    <div>
                                                        <strong>Increase Major Radius</strong>
                                                        <p className="mb-0 small">A 10% increase in major radius improves force by approx. 15%</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="alert alert-light border mb-3">
                                                <div className="d-flex">
                                                    <i className="mdi mdi-check text-success h4 me-2 mb-0"></i>
                                                    <div>
                                                        <strong>Optimize Electrode Spacing</strong>
                                                        <p className="mb-0 small">Reducing gap by 8% increases field strength significantly</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="alert alert-light border">
                                                <div className="d-flex">
                                                    <i className="mdi mdi-check text-success h4 me-2 mb-0"></i>
                                                    <div>
                                                        <strong>Increase Helical Current</strong>
                                                        <p className="mb-0 small">24% higher current results in 35% stronger magnetic field</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="card">
                                    <div className="card-header">
                                        <i className="mdi mdi-code-tags me-2"></i>
                                        Equations Reference
                                    </div>
                                    <div className="card-body">
                                        <div className="mb-3">
                                            <h6>Lorentz Force</h6>
                                            <div className="bg-light p-2 rounded mb-2">
                                                <code>F = q(E + v × B)</code>
                                            </div>
                                            <small className="text-muted">The fundamental equation governing charged particle motion</small>
                                        </div>
                                        
                                        <div className="mb-3">
                                            <h6>Optimal Number of Turns</h6>
                                            <div className="bg-light p-2 rounded mb-2">
                                                <code>N<sub>opt</sub> = 2πR / √[(2πR)² + p²]</code>
                                            </div>
                                            <small className="text-muted">Where p ≈ 2r for simplified design</small>
                                        </div>
                                        
                                        <div className="mb-3">
                                            <h6>Electric Field Strength</h6>
                                            <div className="bg-light p-2 rounded mb-2">
                                                <code>E = V/d</code>
                                            </div>
                                            <small className="text-muted">V is voltage, d is electrode separation</small>
                                        </div>
                                        
                                        <div className="mb-3">
                                            <h6>Magnetic Field from Helical Current</h6>
                                            <div className="bg-light p-2 rounded mb-2">
                                                <code>B ≈ μ₀IN / (2πR)</code>
                                            </div>
                                            <small className="text-muted">Approximation for field at center of torus</small>
                                        </div>
                                        
                                        <div>
                                            <h6>Net Upward Force (Simplified)</h6>
                                            <div className="bg-light p-2 rounded mb-2">
                                                <code>F ≈ η × E × B × L</code>
                                            </div>
                                            <small className="text-muted">η is efficiency factor, L is effective path length</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        };
        
        ReactDOM.render(<App />, document.getElementById('app-container'));
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Background particle animation
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('particleCanvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
            
            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 3 + 1;
                    this.speedX = Math.random() * 1 - 0.5;
                    this.speedY = Math.random() * 1 - 0.5;
                }
                
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    
                    if (this.x > canvas.width) this.x = 0;
                    if (this.x < 0) this.x = canvas.width;
                    if (this.y > canvas.height) this.y = 0;
                    if (this.y < 0) this.y = canvas.height;
                }
                
                draw() {
                    ctx.fillStyle = 'rgba(63, 81, 181, 0.5)';
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            let particles = [];
            function init() {
                particles = [];
                for (let i = 0; i < 50; i++) {
                    particles.push(new Particle());
                }
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                for (let i = 0; i < particles.length; i++) {
                    particles[i].update();
                    particles[i].draw();
                    
                    // Draw lines between near particles
                    for (let j = i; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            ctx.beginPath();
                            ctx.strokeStyle = 'rgba(63, 81, 181, ' + (1 - distance/100) * 0.5 + ')';
                            ctx.lineWidth = 1;
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
                
                requestAnimationFrame(animate);
            }
            
            init();
            animate();
        });
        
        // Initialize tooltips
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        });
    </script>
</body>
</html>